{% if not home %}
  {% include 'partials/footerlayout.twig' %}
{% endif %}

<!-- ANGULAR -->
<script type="text/javascript" src="{{theme.link}}/scripts/angular.min.js"></script>
<script type="text/javascript" src="{{theme.link}}/scripts/angular-ui-router.js"></script>
<script type="text/javascript" src="{{theme.link}}/scripts/angular-sanitize.min.js"></script>

<!-- JQUERY -->
<script type="text/javascript" src="{{theme.link}}/scripts/jquery.min.js"></script>
<script type="text/javascript" src="{{theme.link}}/scripts/bootstrap.min.js"></script>

<!-- SRC DEPENDENCIES -->
<script type="text/javascript" src="{{theme.link}}/scripts/app.js"></script>
<script type="text/javascript" src="{{theme.link}}/vendors/bower_components/modernizr/modernizr-custom.js"></script>

<!-- CONTROLLERS -->
<script type="text/javascript" src="{{theme.link}}/controllers/navCtrl.js"></script>
<script type="text/javascript" src="{{theme.link}}/controllers/newsCtrl.js"></script>
<script type="text/javascript" src="{{theme.link}}/controllers/aboutCtrl.js"></script>
<script type="text/javascript" src="{{theme.link}}/controllers/homeCtrl.js"></script>
<script type="text/javascript" src="{{theme.link}}/controllers/contactCtrl.js"></script>
<script type="text/javascript" src="{{theme.link}}/controllers/newstickerCtrl.js"></script>
<script type="text/javascript" src="{{theme.link}}/controllers/widgetCtrl.js"></script>
<script type="text/javascript" src="{{theme.link}}/controllers/workCtrl.js"></script>

<!-- DIRECTIVES -->
<script type="text/javascript" src="{{theme.link}}/directives/transition-directive.js"></script>
<script type="text/javascript" src="{{theme.link}}/directives/video-directive.js"></script>
<script type="text/javascript" src="{{theme.link}}/scripts/jquery.fullPage.min.js"></script>
<script type="text/javascript" src="{{theme.link}}/scripts/jquery.easings.min.js"></script>


<!-- MAIL CHIMP -->
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<script type="text/javascript">
  var loadApp = function(){
    var body = document.getElementsByTagName('body')[0];
    body.setAttribute('ng-app', 'portlandApp');
    angular.bootstrap(body, ['ng', 'portlandApp']);
  }
  {% if home %}
    $(function(){
	   if (window.location.hash == 'home' || !window.location.hash){
      var splashDiv = document.getElementById('splash');
      if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)) {
        splashDiv.innerHTML = '<img id="gifImage" src="{{gif}}"/>';
        $('#gifImage').on('load',function() {
          var element = document.getElementById("splash");
          delete element;
          loadApp();
        });
      }else{
        splashDiv.innerHTML = '<video id="videoPortland" autoplay><source src="{{video}}" type="video/mp4">Your browser does not support the video tag.</video><div class="col-md-12 video-assets"><a onclick="removeVideo()" class="video--btn" href="{{homepage}}"><span>{{button_text}}</span></a></div>';
      }
      var videoelem = document.getElementById('videoPortland');
        if (videoelem){
          setTimeout(function(){
            $('#videoPortland').on('ended',function(){
                removeVideo();
            });
          }, 7000)
        }
       }
    });
  {% else %}
    $(function(){
      loadApp();
    });
  {% endif %}
</script>
{{wp_footer}}

<script>
	if($('html').hasClass('fp-enabled', 'fp-viewing-0', 'fp-viewing-1', 'fp-viewing-2', 'fp-viewing-3', 'fp-viewing-4')){
		    $.fn.fullpage.destroy('all');
		}
		
	$('#fullpage').fullpage({
	   
	});
</script>

<script type="text/javascript">
  var elem = document.querySelector('.packery-wrap');
  if(elem){
    imagesLoaded( document.querySelector('.packery-wrap'), function( instance ) {
      setTimeout(function(){
        var pckry = new Packery( elem, {
          // options
          itemSelector: '.packery-item',
          gutter: 0
        });
      }, 300);
    });
  }
</script>

